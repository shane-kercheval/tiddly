get_context:
  description: |
    Get a summary of the user's prompts: counts, tags, filters, and recent activity. Call once at session start. Use prompt names from the response with get_prompt_content for full templates.
  parameters:
    tag_limit: |
      Number of top tags
    recent_limit: |
      Recent prompts per category
    filter_limit: |
      Max filters to include
    filter_item_limit: |
      Items per filter

search_prompts:
  description: |
    Search prompts with filters. Returns metadata including prompt_length and prompt_preview for size assessment before fetching the template.
  parameters:
    query: |
      Text to search in name, title, description, and content. Omit to list all prompts.
    tags: |
      Filter by tags (lowercase with hyphens)
    tag_match: |
      'all' requires ALL tags (default), 'any' requires ANY tag
    sort_by: |
      Field to sort by (default: created_at)
    sort_order: |
      Sort direction (default: desc)
    limit: |
      Maximum results to return (default: 50)
    offset: |
      Number of results to skip for pagination
    filter_id: |
      Filter by content filter ID (UUID). Use list_filters to discover filter IDs.

list_filters:
  description: |
    List saved filters with IDs, names, and tag-based rules. Use filter IDs with search_prompts(filter_id=...) to search within a specific filter.

list_tags:
  description: |
    List all tags with their usage counts across prompts.

get_prompt_content:
  description: |
    Get a prompt's Jinja2 template and argument definitions. Supports partial reads via start_line/end_line for large templates.
  parameters:
    name: |
      The prompt name (e.g., 'code-review'). Use search_prompts to discover names.
    start_line: |
      Start line for partial read (1-indexed). Optional.
    end_line: |
      End line for partial read (1-indexed, inclusive). Optional.

get_prompt_metadata:
  description: |
    Get a prompt's metadata without the template content. Returns name, title, description, arguments, tags, prompt_length, and prompt_preview.
  parameters:
    name: |
      The prompt name (e.g., 'code-review'). Use search_prompts to discover names.

create_prompt:
  description: |
    Create a new prompt template. Content uses Jinja2 syntax ({{ variable_name }} placeholders). Variables must be defined in the arguments list.
  parameters:
    name: |
      Prompt identifier (lowercase with hyphens, e.g., 'code-review'). Must be unique.
    title: |
      Human-readable display name (e.g., 'Code Review Assistant')
    description: |
      Description of what the prompt does
    content: |
      The prompt template text. Uses Jinja2 syntax: {{ variable_name }} for placeholders, {% if var %}...{% endif %} for conditionals, {% for x in items %}...{% endfor %} for loops. Variables must be defined in the arguments list.
    arguments: |
      List of argument definitions for the template
    arguments_items_name: |
      Argument name (lowercase with underscores, e.g., 'code_to_review')
    arguments_items_description: |
      Description of the argument
    arguments_items_required: |
      Whether this argument is required (default: false)
    tags: |
      Tags for categorization (lowercase with hyphens)

edit_prompt_content:
  description: |
    Edit a specific part of a template using old_str/new_str replacement — from fixing a typo to replacing an entire section. For full rewrites or restructuring, use update_prompt instead. old_str must match exactly one location in the template. When the edit adds, removes, or renames template variables, pass the complete argument definitions list via the `arguments` parameter in the same call — one call handles both the content edit and argument update atomically.

    Example — removing {{ city }} from a template while keeping {{ name }}:
      name: "my-prompt"
      old_str: ", welcome to {{ city }}"
      new_str: ""
      arguments: [{"name": "name", "description": "User name", "required": true}]
  parameters:
    name: |
      The prompt name (e.g., 'code-review'). Use search_prompts to discover names.
    old_str: |
      Exact text to find in the template. Must match exactly one location.
    new_str: |
      Replacement text. Use empty string to delete the matched text.
    arguments: |
      The complete list of ALL argument definitions that should exist after the edit (full replacement). **Omit when template variables are unchanged** — this avoids unnecessary writes, reduces latency and cost, and eliminates the risk of accidentally altering argument names or descriptions. Only provide when variables are added, removed, or renamed, and include ALL argument definitions (not just changed ones).
    arguments_items_name: |
      Argument name (lowercase with underscores)
    arguments_items_description: |
      Description of the argument
    arguments_items_required: |
      Whether this argument is required

update_prompt:
  description: |
    Rewrite, restructure, or fully replace a prompt's template content, and/or update metadata (title, description, tags, name). Use whenever the instruction asks to rewrite, rephrase, simplify, or restructure the whole template. Use edit_prompt_content when editing a specific section. All parameters optional — only provide what you want to change.
  parameters:
    name: |
      Current prompt name (e.g., 'code-review'). Use search_prompts to discover names.
    new_name: |
      New name for the prompt. Must be unique and lowercase-with-hyphens.
    title: |
      New human-readable title.
    description: |
      New description.
    tags: |
      New tags list. Replaces all existing tags. Omit to preserve existing tags.
    content: |
      New template content (full replacement of entire template). Omit to leave unchanged.
    arguments: |
      New arguments list (full replacement). **Omit when template variables are unchanged** — this avoids unnecessary writes, reduces latency and cost, and eliminates the risk of accidentally altering argument names or descriptions. Only provide when variables are added, removed, or renamed, and include ALL argument definitions (not just changed ones).
    arguments_items_name: |
      Argument name (lowercase with underscores)
    arguments_items_description: |
      Description of the argument
    arguments_items_required: |
      Whether this argument is required
    expected_updated_at: |
      For optimistic locking. Only provide if you have the exact updated_at value from a previous response.
